import Maybe
import Prelude

main : (Int [0..1]) <MayFail>
main = reflect None ()

reflect : forall {a : Type} . Maybe a -> (() -> (a [0..1]) <MayFail>)
reflect mb = 
    case mb of
        None -> (\_ -> throw);
        Some x -> x 

reify : forall {a : Type} . (() -> (a [0..1]) <MayFail>) -> Maybe a
reify f = try f () as [x] in Some x catch None
